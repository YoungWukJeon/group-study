## 엘라스틱서치를 구성하는 개념

#### index
    - RDB의 database 개념
    - 하나의 type만을 가짐(6.1버전 이후)
    - 프라이머리 샤드와 레플리카 샤드로 구성
    - 분산 클러스터 환경에서는 하나의 인덱스가 여러 노드에 들어간다.

#### shard
    - RDB의 partition 개념
    - 같은 index의 다수의 shard로 document를 분산 저장하고 있다.

#### type
    - RDB의 table 개념
    - 사실상 6.1버전 이후에서는 하나의 index당 하나의 type만 사용할 수 있어서 사용하지 않는 것을 권장

#### document
    - RDB의 row 개념
    - JSON 포맷으로 저장
    - 중첩 구조 지원

#### field
    - RDB의 column 개념
    - 목적에 따라 다수의 데이터 타입을 가질 수 있다.

#### mapping
    - RDB의 schema 개념
    - document의 field와 field의 속성을 정의하고 색인 방법을 정의하는 프로세스

## 노드의 종류

- 클러스터는 물리적인 노드 인스턴스의 모임이다.
- 클러스터는 모든 노드의 검색과 색인 작업을 관장하는 논리적인 개념이다.

#### 마스터 노드(master node)
    - 인덱스와 클러스터와 관련된 전반적인 작업을 담당

#### 데이터 노드(data node)
    - document가 실제로 저장되는 노드
    - 검색과 통계같은 데이터 작업을 함

#### 코디테이팅 노드(coordinating node)
    - 사용자 요청에 대한 라우팅 역할만 함

#### 인제스트 노드(ingest node)
    - document의 전처리를 담당

## 클러스터, 노드, 샤드

- 노드 n개, primary shard m개가 있을 때, 각각의 노드에 primary shard가 라운드로빈 방식으로 돌아가면서 배치된다.
- primary shard가 전체 doument를 나눠서 가지고 있고, replica shard가 이에 해당 하는 복제 document를 가지고 있다.
- primary shard : replica shard = 1 : 1